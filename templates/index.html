<html>
  {% set insult = boxes.insults.all|random %}

  <head>
    <title>{{ insult.name }}</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
      @import url('https://fonts.googleapis.com/css?family=Barlow:900|Lexend+Deca&display=swap');
      
      html {
          font-size: 16px;
      }
      body {
          background-color: {{ insult.fields.background_color }};
          font-size: 1rem;
          font-family: Lexend Deca;
          color: #ffffff;
          padding: 3rem;
      }
      h1 {
          font-family: Barlow;
          font-size: 6rem;
          font-weight: 900;
          color: #ffffff;
          text-transform: uppercase;
          letter-spacing: 6px;
          line-height: 1;
          margin: auto;
      }
      h2 {
          font-size: 4rem;
      }
      nav {
          text-align: right;
          position: fixed;
          width: calc(100% - 6rem);
          right: 3rem;
          top: 3rem;
      }
      nav a {
          font-family: lexend deca;
          color: #fff;
          text-transform: uppercase;
          font-size: 2rem;
          letter-spacing: 3px;
          text-decoration: none;
          margin-left: 3rem;
      }
      main {
          display: flex;
          height: 88vh;
          align-items: center;
      }
      .controls {
          width: calc(100% - 6rem);
          position: fixed;
          text-align: right;
          bottom: 3rem;
      }
      .refresh {
          display: inline-block;
          width: 50%;
      }
      .refresh button {
          font-family: Material Icons;
          font-size: 5rem;
          color: #fff;
          background: transparent;
          border: none;
      }
    
      #insult-container {
      animation: Scale .5s ease; 
      }
    
      @keyframes Scale {
        0%   { transform: scale(10); }
        100% { transform: scale(1); }
      }
    </style>
    <script src="{{ static('/js/html2canvas.min.js') }}"></script>
  </head>
  <body>
    <nav>
      {% for item in navs.main %}
      <a href="{{ item.url }}">{{ item.name }}</a>
      {% endfor %}
    </nav>
    {% block body %}
    <main
      id="insult-container"
      class="insult-container"
      style="background-color: inherit; max-width: 1000px; margin: auto; text-align: center;"
    >
      <h1>{{ insult.name }}</h1>
    </main>
    <div class="controls">
      <div class="refresh">
        <button type="submit" onclick="refreshPage()">refresh</button>
      </div>
      <div>
        <button id="captureButton">capture</button>
      </div>
    </div>
    {% endblock %}
    <div
      id="modal"
      style="
        display: none;
        position: fixed;
        top: 0px;
        left: 0px;
        z-index: 99999998;
        width: 100%;
        height: 100%;
        align-items: center;
        flex-direction: row;
        justify-content: center;
        background: rgba(0, 0, 0, 0.5);"
     >
      <button id="close-button" style="position: absolute; top: 0; right: 0;">
        close
      </button>
      <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" class="twitter-share-button twitter-share-button-rendered twitter-tweet-button" style="position: static; visibility: visible; width: 61px; height: 20px;" title="Twitter Tweet Button" src="https://platform.twitter.com/widgets/tweet_button.69e02060c7c44baddf1b5629549acc0c.en.html#dnt=false&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=https%3A%2F%2Fkaylascheidel.getbento.com%2F&amp;size=m&amp;text=Top%20Insults&amp;time=1576099462024&amp;type=share&amp;url=https%3A%2F%2Fkaylascheidel.getbento.com%2F"></iframe>
    </div>
    <script>
      function refreshPage() {
        window.location.reload();
      }
    </script>

<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', function(event) {
        // Capture on button click and add to DOM
        const captureButton = document.querySelector('#captureButton');
        captureButton.addEventListener(
          'click',
          function(e) {
            const modal = document.querySelector('#modal');
            console.log(modal);
            modal.style.display = 'flex';
            const captureTarget = document.querySelector('#insult-container');
            html2canvas(captureTarget).then(canvas => {
              modal.appendChild(canvas);
            });
          },
          false
        );

        // close modal and empty on button click
        const closeButton = document.querySelector('#close-button');
        closeButton.addEventListener('click', function(event) {
          const modal = document.querySelector('#modal');
          const image = document.querySelector('#modal canvas');
          image.remove();
          modal.style.display = 'none';
        });
      });
    </script>
  </body>
</html>